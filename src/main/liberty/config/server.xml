<?xml version="1.0" encoding="UTF-8"?>
<server description="BIP API Jakarta EE Server">

    <!-- Enable the following features -->
    <featureManager>
        <feature>jakartaee-10.0</feature>
        <feature>microProfile-6.0</feature>
        <feature>localConnector-1.0</feature>
    </featureManager>

    <!-- Define the host name and ports -->
    <httpEndpoint id="defaultHttpEndpoint"
                  httpPort="8080"
                  httpsPort="8443" />

    <!-- H2 Database Configuration -->
    <library id="H2JDBCLib">
        <fileset dir="${server.config.dir}/lib" includes="h2*.jar"/>
    </library>

    <dataSource id="DefaultDataSource"
                jndiName="jdbc/bipDS"
                jdbcDriverRef="H2JDBCDriver"
                type="javax.sql.DataSource">
        <properties.derby.embedded databaseName="memory:bipdb" createDatabase="create"/>
    </dataSource>

    <jdbcDriver id="H2JDBCDriver" libraryRef="H2JDBCLib"/>

    <!-- Automatically expand WAR files -->
    <applicationManager autoExpand="true"/>

    <!-- BIP API Application -->
    <webApplication location="bip-api-jakarta-ee.war" contextRoot="/api">
        <dataSource-ref>DefaultDataSource</dataSource-ref>
    </webApplication>

    <!-- Logging -->
    <logging traceSpecification="*=info:com.bip.*=debug"/>

</server>